<head>
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
</head>
<canvas style="width:100%;height:100%"></canvas>
<script>
const $=s=>document.querySelector(s),$$=s=>document.querySelectorAll(s),D=console.log,c=$('canvas').getContext('2d')
c.canvas.width=window.innerWidth;c.canvas.height=window.innerHeight
let x=c.canvas.width/2|0,y=c.canvas.height/2|0,vx=vy=0,tx=ty=null,k=[]

// keyboard movement
onkeydown=e=>{if(e.repeat)return;tx=ty=0;k.push(e.key)}
onkeyup=e=>{vx=vy=0;delete k[k.indexOf(e.key)];k=k.filter(e=>e)}

// mouse/touch movement
onmousedown=e=>{D('e=',e);tx=e.clientX|0;ty=e.clientY|0;D(tx,ty)}

requestAnimationFrame(function f(){
  // background
  c.fillStyle='#0f0';c.fillRect(0,0,c.canvas.width,c.canvas.height)

  // character keyboard movement
  switch(k[k.length-1]){case'a':vx=-1;vy=0;break;case's':vx=0;vy=1;break;case'd':vx=1;vy=0;break;case'w':vx=0;vy=-1}
  // character mouse movement
  if(tx&&tx!=x){vx=Math.sign(tx-x);vy=0}else if(ty&&ty!=y){vx=0;vy=Math.sign(ty-y)};if(tx==x&&ty==y){tx=ty=null,vx=vy=0}
  // character render
  x+=vx;y+=vy;c.fillStyle='#000';c.fillRect(x,y,10,10)

  // next frame
  requestAnimationFrame(f)
})
</script>